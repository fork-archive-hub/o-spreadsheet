<templates>
  <t t-name="o-spreadsheet-FiguresContainer" owl="1">
    <div>
      <t t-foreach="getVisibleFigures()" t-as="info" t-key="info.id">
        <div class="o-figure-container position-absolute" t-att-style="getContainerStyle(info)">
          <div
            class="o-figure-wrapper position-absolute w-100 h-100 overflow-hidden"
            t-on-mousedown.stop="(ev) => this.onMouseDown(info.figure, ev)">
            <div
              class="o-figure position-absolute bottom-0 end-0"
              t-att-style="getFigureStyle(info)"
              t-att-class="{'active': info.isSelected, 'o-dragging': info.id === dnd.figureId}"
              tabindex="0"
              t-on-keydown.stop="(ev) => this.onKeyDown(info.figure, ev)"
              t-on-keyup.stop="">
              <t
                t-component="figureRegistry.get(info.figure.tag).Component"
                t-key="info.id"
                sidePanelIsOpen="props.sidePanelIsOpen"
                onFigureDeleted="props.onFigureDeleted"
                figure="info.figure"
              />
            </div>
          </div>
          <t t-if="info.isSelected">
            <div
              class="o-anchor o-top position-absolute"
              t-att-style="this.getAnchorPosition('top', info)"
              t-on-mousedown.stop="(ev) => this.resize(info.figure, 0,-1, ev)"
            />
            <div
              class="o-anchor o-topRight position-absolute"
              t-att-style="this.getAnchorPosition('top right', info)"
              t-on-mousedown.stop="(ev) => this.resize(info.figure, 1,-1, ev)"
            />
            <div
              class="o-anchor o-right position-absolute"
              t-att-style="this.getAnchorPosition('right', info)"
              t-on-mousedown.stop="(ev) => this.resize(info.figure, 1,0, ev)"
            />
            <div
              class="o-anchor o-bottomRight position-absolute"
              t-att-style="this.getAnchorPosition('bottom right', info)"
              t-on-mousedown.stop="(ev) => this.resize(info.figure, 1,1, ev)"
            />
            <div
              class="o-anchor o-bottom position-absolute"
              t-att-style="this.getAnchorPosition('bottom', info)"
              t-on-mousedown.stop="(ev) => this.resize(info.figure, 0,1, ev)"
            />
            <div
              class="o-anchor o-bottomLeft position-absolute"
              t-att-style="this.getAnchorPosition('bottom left', info)"
              t-on-mousedown.stop="(ev) => this.resize(info.figure, -1,1, ev)"
            />
            <div
              class="o-anchor o-left position-absolute"
              t-att-style="this.getAnchorPosition('left', info)"
              t-on-mousedown.stop="(ev) => this.resize(info.figure, -1,0, ev)"
            />
            <div
              class="o-anchor o-topLeft position-absolute"
              t-att-style="this.getAnchorPosition('top left', info)"
              t-on-mousedown.stop="(ev) => this.resize(info.figure, -1,-1, ev)"
            />
          </t>
        </div>
      </t>
    </div>
  </t>
</templates>
