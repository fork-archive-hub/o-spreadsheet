<templates>
  <t t-name="o-spreadsheet-LinkEditor" owl="1">
    <div
      class="o-link-editor d-flex flex-column bg-white p-3 shadow"
      t-on-click.stop="() => this.menu.isOpen=false"
      t-on-keydown.stop="onKeyDown"
      t-ref="linkEditor">
      <div class="o-section">
        <div class="o-section-title mb-2 fw-bold text-secondary">Text</div>
        <div class="d-flex">
          <input type="text" class="o-input w-100" t-model="state.link.label"/>
        </div>

        <div class="o-section-title mt-3 mb-2 fw-bold text-secondary">Link</div>
        <div class="o-link-url position-relative flex-grow-1">
          <t t-if="state.isUrlEditable">
            <input class="o-input w-100" type="text" t-ref="urlInput" t-model="state.link.url"/>
          </t>
          <t t-else="">
            <input
              class="o-input w-100"
              type="text"
              t-att-value="state.urlRepresentation"
              disabled="1"
            />
          </t>
          <button
            t-if="state.link.url"
            t-on-click="removeLink"
            class="o-remove-url position-absolute end-0 top-0 border-0 bg-white pb-1">
            âœ–
          </button>
          <button
            t-if="!state.link.url"
            t-on-click.stop="openMenu"
            class="o-special-link position-absolute end-0 top-0 border-0 bg-white pb-1">
            <t t-call="o-spreadsheet-Icon.LIST"/>
          </button>
        </div>
      </div>
      <Menu
        t-if="menu.isOpen"
        position="menuPosition"
        menuItems="menuItems"
        onMenuClicked="(ev) => this.onSpecialLink(ev)"
        onClose="() => this.menu.isOpen=false"
      />
      <div class="o-buttons pt-5 text-end">
        <button t-on-click="cancel" class="o-button o-cancel btn btn-secondary px-3 me-2">
          Cancel
        </button>
        <button
          t-on-click="save"
          class="o-button o-save btn btn-primary px-3 text-white"
          t-att-disabled="!state.link.url">
          Confirm
        </button>
      </div>
    </div>
  </t>
</templates>
